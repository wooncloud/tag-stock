# Phase 3: ë¬¸ì˜í•˜ê¸° ê¸°ëŠ¥ (Discord Webhook)

## ê°œìš”

**ëª©í‘œ**: Discord Webhookì„ í™œìš©í•œ ì‚¬ìš©ì ë¬¸ì˜ ì‹œìŠ¤í…œ êµ¬í˜„

**ìƒíƒœ**: ğŸ“‹ ê¸°íš ë‹¨ê³„
**ì˜ˆìƒ ì†Œìš”**: TBD

---

## ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

### ì‚¬ìš©ì ìŠ¤í† ë¦¬
- ì‚¬ìš©ìëŠ” ëœë”© í˜ì´ì§€ ë˜ëŠ” ëŒ€ì‹œë³´ë“œì—ì„œ ë¬¸ì˜ í¼ì„ ì‘ì„±í•  ìˆ˜ ìˆë‹¤
- ë¬¸ì˜ ë‚´ìš©ì€ Discord ì±„ë„ë¡œ ì¦‰ì‹œ ì „ì†¡ëœë‹¤
- ê´€ë¦¬ìëŠ” Discordì—ì„œ ë¬¸ì˜ë¥¼ í™•ì¸í•˜ê³  ì‘ë‹µí•  ìˆ˜ ìˆë‹¤

### ë¬¸ì˜ ìœ í˜•
1. **ì¼ë°˜ ë¬¸ì˜**: ì„œë¹„ìŠ¤ ê´€ë ¨ ì§ˆë¬¸
2. **ê¸°ìˆ  ì§€ì›**: ë²„ê·¸ ë¦¬í¬íŠ¸, ê¸°ëŠ¥ ì˜¤ë¥˜
3. **ê²°ì œ ë¬¸ì˜**: êµ¬ë…, ê²°ì œ ê´€ë ¨
4. **ê¸°ëŠ¥ ì œì•ˆ**: ìƒˆë¡œìš´ ê¸°ëŠ¥ ìš”ì²­
5. **ê¸°íƒ€**

---

## êµ¬í˜„ ì•„í‚¤í…ì²˜

```
[ë¬¸ì˜ í¼ ì‘ì„±]
      â†“
[í´ë¼ì´ì–¸íŠ¸ ìœ íš¨ì„± ê²€ì¦]
      â†“
[Server Action í˜¸ì¶œ]
      â†“
[Rate Limiting ì²´í¬]
   - IP ê¸°ë°˜: ë¶„ë‹¹ 3íšŒ
   - ì‚¬ìš©ì ê¸°ë°˜: ì‹œê°„ë‹¹ 10íšŒ
      â†“
[Discord Webhook ì „ì†¡]
      â†“
[ì„±ê³µ/ì‹¤íŒ¨ ì‘ë‹µ]
      â†“
[í† ìŠ¤íŠ¸ ì•Œë¦¼]
```

---

## Discord Webhook ì„¤ì •

### Webhook ìƒì„± ë°©ë²•
1. Discord ì„œë²„ â†’ ì±„ë„ ì„¤ì • â†’ ì—°ë™ â†’ ì›¹í›„í¬ ìƒì„±
2. Webhook URL ë³µì‚¬
3. `.env.local`ì— ì¶”ê°€

### í™˜ê²½ ë³€ìˆ˜
```env
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/xxx/yyy
```

---

## ë©”ì‹œì§€ í¬ë§·

### Discord Embed êµ¬ì¡°

```json
{
  "embeds": [{
    "title": "ğŸ“¬ ìƒˆë¡œìš´ ë¬¸ì˜",
    "color": 5814783,
    "fields": [
      {
        "name": "ğŸ“§ ì´ë©”ì¼",
        "value": "user@example.com",
        "inline": true
      },
      {
        "name": "ğŸ“‚ ìœ í˜•",
        "value": "ê¸°ìˆ  ì§€ì›",
        "inline": true
      },
      {
        "name": "ğŸ‘¤ ì‚¬ìš©ì",
        "value": "Pro (user_id: xxx)",
        "inline": true
      },
      {
        "name": "ğŸ“ ì œëª©",
        "value": "ì´ë¯¸ì§€ ì—…ë¡œë“œ ì˜¤ë¥˜"
      },
      {
        "name": "ğŸ’¬ ë‚´ìš©",
        "value": "ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤..."
      }
    ],
    "timestamp": "2026-01-25T12:00:00.000Z",
    "footer": {
      "text": "TagStock Contact Form"
    }
  }]
}
```

### Discord í‘œì‹œ ì˜ˆì‹œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¬ ìƒˆë¡œìš´ ë¬¸ì˜                          â”‚
â”‚                                         â”‚
â”‚  ğŸ“§ ì´ë©”ì¼        ğŸ“‚ ìœ í˜•      ğŸ‘¤ ì‚¬ìš©ì  â”‚
â”‚  user@example    ê¸°ìˆ  ì§€ì›     Pro       â”‚
â”‚                                         â”‚
â”‚  ğŸ“ ì œëª©                                 â”‚
â”‚  ì´ë¯¸ì§€ ì—…ë¡œë“œ ì˜¤ë¥˜                       â”‚
â”‚                                         â”‚
â”‚  ğŸ’¬ ë‚´ìš©                                 â”‚
â”‚  ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.       â”‚
â”‚  Chrome ë¸Œë¼ìš°ì €ì—ì„œ 5MB ì´ë¯¸ì§€ë¥¼         â”‚
â”‚  ì—…ë¡œë“œí•˜ë©´ íƒ€ì„ì•„ì›ƒë©ë‹ˆë‹¤.               â”‚
â”‚                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  TagStock Contact Form â€¢ ì˜¤ëŠ˜ 12:00     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## êµ¬í˜„ íƒœìŠ¤í¬

### Phase 3.1: ë°±ì—”ë“œ êµ¬í˜„
- [ ] Discord Webhook ì„œë¹„ìŠ¤ ì‘ì„± (`services/discord.ts`)
- [ ] ë¬¸ì˜ ì „ì†¡ Server Action ì‘ì„± (`app/actions/contact.ts`)
- [ ] Rate Limiting ë¯¸ë“¤ì›¨ì–´ êµ¬í˜„
- [ ] ì…ë ¥ ìœ íš¨ì„± ê²€ì¦ (Zod ìŠ¤í‚¤ë§ˆ)

### Phase 3.2: í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„
- [ ] ë¬¸ì˜ í¼ ì»´í¬ë„ŒíŠ¸ ì‘ì„± (`components/contact-form.tsx`)
- [ ] ë¬¸ì˜ ìœ í˜• ì„ íƒ ë“œë¡­ë‹¤ìš´
- [ ] í¼ ìœ íš¨ì„± ê²€ì¦ UI
- [ ] ì œì¶œ ë¡œë”©/ì„±ê³µ/ì—ëŸ¬ ìƒíƒœ ì²˜ë¦¬

### Phase 3.3: í˜ì´ì§€ í†µí•©
- [ ] ëœë”© í˜ì´ì§€ Footerì— "ë¬¸ì˜í•˜ê¸°" ë§í¬
- [ ] `/contact` í˜ì´ì§€ ìƒì„± ë˜ëŠ” ëª¨ë‹¬ êµ¬í˜„
- [ ] ëŒ€ì‹œë³´ë“œ ì‚¬ì´ë“œë°”ì— "ì§€ì›" ë©”ë‰´ ì¶”ê°€

### Phase 3.4: í…ŒìŠ¤íŠ¸ & ëª¨ë‹ˆí„°ë§
- [ ] Discord Webhook ì „ì†¡ í…ŒìŠ¤íŠ¸
- [ ] Rate Limiting í…ŒìŠ¤íŠ¸
- [ ] ì—ëŸ¬ í•¸ë“¤ë§ í…ŒìŠ¤íŠ¸

---

## íŒŒì¼ êµ¬ì¡°

```
services/
â””â”€â”€ discord.ts                   # Discord Webhook ì„œë¹„ìŠ¤

app/
â”œâ”€â”€ actions/
â”‚   â””â”€â”€ contact.ts               # ë¬¸ì˜ ì „ì†¡ Server Action
â””â”€â”€ contact/
    â””â”€â”€ page.tsx                 # ë¬¸ì˜ í˜ì´ì§€ (ì„ íƒì )

components/
â””â”€â”€ contact-form.tsx             # ë¬¸ì˜ í¼ ì»´í¬ë„ŒíŠ¸

lib/
â””â”€â”€ validations/
    â””â”€â”€ contact.ts               # ë¬¸ì˜ í¼ Zod ìŠ¤í‚¤ë§ˆ
```

---

## API ì„¤ê³„

### Discord Webhook ì„œë¹„ìŠ¤ (`services/discord.ts`)

```typescript
interface ContactMessage {
  email: string;
  type: 'general' | 'support' | 'billing' | 'feature' | 'other';
  subject: string;
  message: string;
  userId?: string;
  userPlan?: 'free' | 'pro';
}

/**
 * Discord Webhookìœ¼ë¡œ ë¬¸ì˜ ë©”ì‹œì§€ ì „ì†¡
 */
export async function sendContactToDiscord(
  data: ContactMessage
): Promise<{ success: boolean; error?: string }>;
```

### Server Action (`app/actions/contact.ts`)

```typescript
'use server';

import { z } from 'zod';

const contactSchema = z.object({
  email: z.string().email('ìœ íš¨í•œ ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”'),
  type: z.enum(['general', 'support', 'billing', 'feature', 'other']),
  subject: z.string().min(5, 'ì œëª©ì€ 5ì ì´ìƒ ì…ë ¥í•˜ì„¸ìš”').max(100),
  message: z.string().min(20, 'ë‚´ìš©ì€ 20ì ì´ìƒ ì…ë ¥í•˜ì„¸ìš”').max(2000),
});

export async function submitContact(formData: FormData): Promise<{
  success: boolean;
  error?: string;
}>;
```

---

## UI/UX ì„¤ê³„

### ë¬¸ì˜ í¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¬ Contact Us                          â”‚
â”‚                                         â”‚
â”‚  Email *                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ your@email.com                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  Type *                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Technical Support           â–¼   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  Subject *                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Brief description of your issue â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  Message *                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                 â”‚   â”‚
â”‚  â”‚                                 â”‚   â”‚
â”‚  â”‚ Describe your issue in detail...â”‚   â”‚
â”‚  â”‚                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         Send Message            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  We typically respond within 24 hours.  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë¬¸ì˜ ìœ í˜• ì˜µì…˜

| ê°’ | í‘œì‹œ í…ìŠ¤íŠ¸ | Discord íƒœê·¸ ìƒ‰ìƒ |
|------|-------------|-----------------|
| `general` | General Inquiry | íŒŒë‘ |
| `support` | Technical Support | ë¹¨ê°• |
| `billing` | Billing & Subscription | ì´ˆë¡ |
| `feature` | Feature Request | ë³´ë¼ |
| `other` | Other | íšŒìƒ‰ |

### ì„±ê³µ ë©”ì‹œì§€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… Message Sent!                       â”‚
â”‚                                         â”‚
â”‚  Thank you for contacting us.           â”‚
â”‚  We'll get back to you within 24 hours. â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         Back to Home            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Rate Limiting

### ì œí•œ ê·œì¹™

| ê¸°ì¤€ | ì œí•œ | ìœˆë„ìš° |
|------|------|--------|
| IP ì£¼ì†Œ | 3íšŒ | 1ë¶„ |
| ì¸ì¦ ì‚¬ìš©ì | 10íšŒ | 1ì‹œê°„ |
| ë¹„ì¸ì¦ ì‚¬ìš©ì | 5íšŒ | 1ì‹œê°„ |

### êµ¬í˜„ ë°©ì‹

```typescript
// Vercel Edge Config ë˜ëŠ” Upstash Redis ì‚¬ìš©
import { Ratelimit } from '@upstash/ratelimit';
import { Redis } from '@upstash/redis';

const ratelimit = new Ratelimit({
  redis: Redis.fromEnv(),
  limiter: Ratelimit.slidingWindow(3, '1 m'),
});
```

---

## ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

1. **Rate Limiting**: ìŠ¤íŒ¸ ë°©ì§€
2. **ì…ë ¥ ê²€ì¦**: XSS, Injection ë°©ì§€
3. **Webhook URL ë³´í˜¸**: í™˜ê²½ ë³€ìˆ˜ë¡œ ê´€ë¦¬, í´ë¼ì´ì–¸íŠ¸ ë…¸ì¶œ ê¸ˆì§€
4. **CAPTCHA** (ì„ íƒ): ì¶”í›„ reCAPTCHA ì¶”ê°€ ê³ ë ¤

---

## í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] í¼ ìœ íš¨ì„± ê²€ì¦ ë™ì‘
- [ ] Discord ë©”ì‹œì§€ ì •ìƒ ì „ì†¡
- [ ] ì—ëŸ¬ ì‹œ ì ì ˆí•œ ë©”ì‹œì§€ í‘œì‹œ
- [ ] Rate Limiting ë™ì‘ í™•ì¸

### UI í…ŒìŠ¤íŠ¸
- [ ] ëª¨ë°”ì¼ ë°˜ì‘í˜• í™•ì¸
- [ ] ë¡œë”© ìƒíƒœ í‘œì‹œ
- [ ] ì„±ê³µ/ì—ëŸ¬ í† ìŠ¤íŠ¸ í‘œì‹œ

---

## ì˜ì¡´ì„±

### ì‹ ê·œ íŒ¨í‚¤ì§€ (ì„ íƒì )
```bash
# Rate Limiting (Upstash ì‚¬ìš© ì‹œ)
npm install @upstash/ratelimit @upstash/redis
```

### ê¸°ì¡´ íŒ¨í‚¤ì§€ í™œìš©
- `zod`: ì…ë ¥ ìœ íš¨ì„± ê²€ì¦
- `sonner`: í† ìŠ¤íŠ¸ ì•Œë¦¼

---

## ë³€ê²½ ì´ë ¥

| ë‚ ì§œ | ë²„ì „ | ë³€ê²½ ë‚´ìš© |
|------|------|----------|
| 2026-01-25 | 0.1 | ì´ˆê¸° ê¸°íš ë¬¸ì„œ ì‘ì„± |
