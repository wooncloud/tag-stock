<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>TagStock - Local Files</title>
    <link rel="stylesheet" href="../sidepanel/styles.css" />
  </head>

  <body class="bg-background text-foreground min-h-screen">
    <div class="flex h-screen flex-col">
      <!-- Header -->
      <header class="bg-primary text-primary-foreground border-b px-6 py-3">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-3">
            <h1 class="text-lg font-semibold">TagStock</h1>
            <span class="rounded-full bg-white/20 px-2 py-0.5 text-xs">Local Files</span>
            <span id="fileCount" class="text-xs opacity-70">0 files</span>
          </div>
          <div class="flex items-center gap-3">
            <div class="mr-2 text-right">
              <div class="text-xs opacity-70">Credits</div>
              <div id="creditDisplay" class="text-base font-bold">--</div>
            </div>
          </div>
        </div>
      </header>

      <!-- Main Content: Split Layout -->
      <div class="flex flex-1 overflow-hidden">
        <!-- Left Panel: File Selection + Grid -->
        <div class="flex w-2/5 flex-col border-r">
          <!-- File Picker Area -->
          <section
            id="filePicker"
            class="cursor-pointer border-b bg-white/50 p-6 transition-colors hover:bg-white/80"
          >
            <div class="rounded-lg border-2 border-dashed border-black/20 p-8 text-center">
              <svg
                class="mx-auto mb-3 h-12 w-12 opacity-40"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="1.5"
                  d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"
                />
              </svg>
              <p class="mb-1 text-sm font-medium">Drag & drop images here</p>
              <p class="text-muted-foreground mb-3 text-xs">or click to browse</p>
              <p class="text-muted-foreground text-xs">JPEG only, max 50MB per file</p>
            </div>
            <input type="file" id="fileInput" accept="image/jpeg,image/jpg" multiple hidden />
          </section>

          <!-- Image Grid -->
          <div class="flex-1 overflow-y-auto p-4">
            <div id="imageGrid" class="grid grid-cols-2 gap-3"></div>
          </div>
        </div>

        <!-- Right Panel: Detail View + Metadata Editor -->
        <div class="flex flex-1 flex-col">
          <!-- Detail Panel -->
          <section id="detailPanel" class="bg-card border-b p-6">
            <div id="detailPlaceholder" class="text-muted-foreground py-12 text-center">
              Select an image to view details
            </div>
            <div id="detailContent" class="hidden">
              <img id="detailImage" class="mx-auto mb-4 max-h-64 rounded-lg shadow-md" />
              <div class="grid grid-cols-3 gap-2 text-xs">
                <div>
                  <span class="text-muted-foreground">File:</span>
                  <span id="detailFileName" class="ml-1 font-medium"></span>
                </div>
                <div>
                  <span class="text-muted-foreground">Size:</span>
                  <span id="detailFileSize" class="ml-1 font-medium"></span>
                </div>
                <div>
                  <span class="text-muted-foreground">Dimensions:</span>
                  <span id="detailDimensions" class="ml-1 font-medium"></span>
                </div>
              </div>
            </div>
          </section>

          <!-- Metadata Editor -->
          <section id="metadataEditor" class="hidden flex-1 overflow-y-auto p-6">
            <div class="space-y-4">
              <!-- Title Field -->
              <div>
                <label class="mb-1 block text-sm font-medium">Title</label>
                <input
                  type="text"
                  id="titleInput"
                  class="w-full rounded-lg border px-3 py-2 focus:ring-2 focus:ring-black focus:outline-none"
                  placeholder="Enter title..."
                />
              </div>

              <!-- Keywords Field -->
              <div>
                <label class="mb-1 block text-sm font-medium">
                  Keywords
                  <span id="keywordCount" class="text-muted-foreground text-xs">(0)</span>
                </label>
                <div
                  id="keywordTags"
                  class="mb-2 flex min-h-[40px] flex-wrap gap-2 rounded-lg border p-2"
                ></div>
                <input
                  type="text"
                  id="keywordInput"
                  class="w-full rounded-lg border px-3 py-2 focus:ring-2 focus:ring-black focus:outline-none"
                  placeholder="Type keyword and press Enter..."
                />
              </div>

              <!-- Caption Field -->
              <div>
                <label class="mb-1 block text-sm font-medium">Description (optional)</label>
                <textarea
                  id="captionInput"
                  rows="3"
                  class="w-full rounded-lg border px-3 py-2 focus:ring-2 focus:ring-black focus:outline-none"
                  placeholder="Enter description..."
                ></textarea>
              </div>
            </div>
          </section>

          <!-- Action Buttons -->
          <section id="actionButtons" class="bg-card hidden border-t p-6">
            <div class="flex gap-3">
              <button
                id="analyzeBtn"
                class="bg-primary text-primary-foreground hover:bg-primary/90 flex-1 rounded-lg px-4 py-2 font-medium transition-colors disabled:opacity-50"
              >
                <span id="analyzeBtnText">AI Analyze</span>
              </button>
              <button
                id="downloadBtn"
                class="flex-1 rounded-lg bg-green-600 px-4 py-2 font-medium text-white transition-colors hover:bg-green-700 disabled:opacity-50"
              >
                <span id="downloadBtnText">Embed & Download</span>
              </button>
            </div>
          </section>
        </div>
      </div>
    </div>

    <script type="module" src="./index.js"></script>
  </body>
</html>
